<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--<script src="vendors/lib/jquery-3.1.1.min.js"></script>-->
    <script src="bootstrap/jquery.min.js"></script>
    <script src="bootstrap/bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap/bootstrap-theme.min.css">
    <script type="text/javascript" src="js/jquery.simple.timer.js"></script>
    <script type="text/javascript" src="js/jquery.plugin.js"></script>
    <script type="text/javascript" src="js/jquery.countdown.js"></script>
    <script type="text/javascript" src="js/jquery.countdown-pl.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery.countdown.css">
    <link rel="stylesheet" href="css/game.css">
    <link href="https://fonts.googleapis.com/css?family=Bungee+Shade" rel="stylesheet">
    <script src="https://use.fontawesome.com/4da0cbc8ab.js"></script>


</head>
<body>


<div id="myNav" class="overlay">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <div class="overlay-content">


        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-6" id="memo-title">
                MEM-O MEMO
                <div class="col-md-2"></div>
            </div>


            <div class="row">
                <div class="col-md-4">
                    <div class="memo-rules-emptytop"></div>
                    <div class="memo-rules-title text-center">
                        Zagraj w MEM-o MEMO
                    </div>
                    <div class="memo-rules-undertitle text-center">
                        z bohaterami popularnych memów
                    </div>
                    <div class="memo-rules-emptytop"></div>
                    <div class="memo-rules-win text-center">
                        Wygraj bilety do kina<br> dla 2 osób
                    </div>
                    <div class="memo-rules-ticket text-center">
                        <div id="memo-ticket-icon"><i class="fa fa-ticket fa-4x" aria-hidden="true "></i></div>

                    </div>

                    <div class="memo-rules-btn text-center">
                        <div>Masz 30 sekund<br><br> Kliknij przycisk:</div>
                        <div>
                            <button class="btn btn-lg btn-default game-timer-start">START!</button>
                        </div>

                    </div>
                    <div class="timer timer-on" data-seconds-left=10></div>
                    <div>
                    </div>
                    <div class="memo-results"></div>


                </div>
                <div class="col-md-6">

                    <ol></ol>
                    <script>
                        var arrImages = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8];
                        for (var i = 0; i < 16; i++) {
                            var num = Math.ceil(Math.random() * arrImages.length) - 1; //indeks obrazka
                            var img = arrImages.splice(num, 1);
                            $('ol').append(
                                    '<li class="' + img[0] + '" id="' + i + img[0] + '">' + '<img src="game_img/' + img[0] + '.jpg' + '">' + '</li>'
                            );
                        }
                        var clickCount = 0;
                        var imgClass1 = "";
                        var imgClass2 = "";
                        console.log('Click count: ' + clickCount);


                        $('body').on('click', 'li', function () {
                            if (clickCount == 0 && !$(this).children('img').hasClass('matched')) {
                                $(this).children("img").addClass("img_selected");
                                imgClass1 = $(this).attr('class');
                                imgId1 = $(this).attr('id');
                                clickCount++;
                            }

                            else if (clickCount == 1 && $(this).attr('id') != imgId1 && !$(this).children('img').hasClass('matched')) {
                                $(this).children("img").addClass("img_selected");
                                imgClass2 = $(this).attr('class');

                                if (imgClass1 === imgClass2) {
                                    $('li.' + imgClass2).children("img").addClass("matched");
                                    $('li.' + imgClass1).children("img").addClass("matched");
                                    console.log('img Class1: ' + imgClass1 + ' === img Class2: ' + imgClass2);
                                    clickCount = 0;
                                }

                                else {
                                    setTimeout(function () {
                                        $('img').not('img.matched').removeClass("img_selected");
                                        clickCount = 0;
                                    }, 2000);
                                }
                                clickCount++;
                            }

                            else {

                                console.log("else");
                            }

                        });
                    </script>


                </div>
                <div class="col-md-2"></div>


            </div>


        </div>

        <script>

//            $(".game-timer-start").click(function () {
$(".game-timer-start").one("click", function () {


//                window.setInterval(function () {
//                    var numItems = $('.matched').length;
//
//                    if (numItems == 16) {
//                        $(' .memo-results ').text("You win!!!");
//                    }
//
//                    else {
//                        $(' .memo-results ').text("Try further");
////                        $('div').removeClass('game-timer-start').addClass('game-timer-start');
//
//                    }
//                    }, 2000);


                $('.timer').startTimer({

                    onComplete: function () {
                        var numItems = $('.matched').length;

                        if (numItems == 16) {
                            console.log("You win!!");
                            $(' .memo-results ').text("BRAWO! NAGRODĄ JEST BILET DO KINA. KOD: Qfx23232");

                        }

                        else {
                            console.log("You lost!!");
                            $(' .memo-results ').text("TYM RAZEM SIĘ NIE UDAŁO!");

                        }

                        console.log(numItems + " num items");

                        console.log('Complete');
                    }
                });
            }
            )


        </script>


        <!--<iframe src="game.html"></iframe>-->


    </div>
</div>

<span style="font-size:30px;cursor:pointer" onclick="openNav()">Kliknij, żeby otworzyć</span>

<script>
    function openNav() {
        document.getElementById("myNav").style.width = "100%";
    }

    function closeNav() {
        document.getElementById("myNav").style.width = "0%";
    }
</script>


</body>
</html>
